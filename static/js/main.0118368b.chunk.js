(this["webpackJsonpuse-request-example"]=this["webpackJsonpuse-request-example"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var r,u=n(0),a=n.n(u),l=n(2),s=n.n(l),c=(n(12),n(4)),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};!function(e){e.Idle="idle",e.Pending="pending",e.Completed="completed",e.Failed="failed"}(r||(r={}));var i=function(e,t){var n=u.useRef(0),a=u.useRef(0),l=u.useRef(e);l.current=e;var s=u.useRef({status:t?r.Pending:r.Idle}),c=u.useState(s.current),i=c[0],d=c[1],p=function(e){s.current=e,d(e)},m=u.useCallback((function(){return p({status:r.Idle})}),[]),f=u.useCallback((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var u=++n.current;p(o(o({},s.current),{status:r.Pending}));var c=new Promise((function(t){return t(l.current.apply(l,e))}));return c.then((function(e){u>a.current&&(a.current=u,p({status:u===n.current?r.Completed:s.current.status,value:e}))}),(function(e){u>a.current&&(a.current=u,p({status:u===n.current?r.Failed:s.current.status,error:e}))})),c}),t||[]);return u.useEffect((function(){t&&f.apply(void 0,t)}),function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),u=0;for(t=0;t<n;t++)for(var a=arguments[t],l=0,s=a.length;l<s;l++,u++)r[u]=a[l];return r}([f],t||[])),u.useMemo((function(){return o(o({},i),{reset:m,execute:f,idle:i.status===r.Idle,pending:i.status===r.Pending,completed:i.status===r.Completed,failed:i.status===r.Failed})}),[i,m,f])},d=function(e){return new Promise((function(t,n){e>0?setTimeout(t,2e3,Math.round(Math.random()*e)):setTimeout(n,2e3,"Max value must be greater than zero")}))},p=function(){var e=a.a.useState(""),t=Object(c.a)(e,2),n=t[0],r=t[1],u=i(d,[n?+n:100]),l=u.value,s=u.error,o=u.pending;return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("input",{type:"number",value:n,placeholder:100..toString(),onChange:function(e){return r(e.target.value)}}),o?a.a.createElement("span",null," processing"):null),void 0!==l?a.a.createElement("div",null,"Last result: ",l):null,s?a.a.createElement("div",null,"Error: ",s):null)},m=n(1),f={lastId:2,resources:[{id:1,label:"First resource"},{id:2,label:"Second resource"}]},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3*Math.random();return new Promise((function(n){return setTimeout((function(){return n(e())}),t)}))},g={get:function(){return v((function(){return f.resources}))},post:function(e){return v((function(){var t=Object(m.a)(Object(m.a)({},e),{},{id:++f.lastId});return f.resources.push(t),t}))},put:function(e,t){return v((function(){if(f.resources.find((function(t){return t.id===e}))){var n=Object(m.a)(Object(m.a)({},t),{},{id:e});return f.resources=f.resources.map((function(t){return t.id===e?n:t})),n}}))},delete:function(e){return v((function(){var t=f.resources.length;return f.resources=f.resources.filter((function(t){return t.id!==e})),f.resources.length!==t}))}},h=function(){var e=i(g.get,[]),t=e.execute;return{resources:e.value,status:e.status,create:i((function(e){return g.post(e).then(t)})).execute,remove:i((function(e){return g.delete(e).then(t)})).execute}},b=function(){var e=Object(u.useRef)(null),t=h(),n=t.resources,l=t.status,s=t.create,c=t.remove;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.current&&(s({label:e.current.value}),e.current.value="")}},a.a.createElement("input",{type:"text",ref:e,required:!0}),a.a.createElement("input",{type:"submit",value:"Add"})),n||l!==r.Pending?null:a.a.createElement("p",null,"Loading..."),n?a.a.createElement("ol",null,n.map((function(e){return a.a.createElement("li",{key:e.id},e.label," ",a.a.createElement("input",{type:"button",onClick:function(){return c(e.id)},value:"remove"}))}))):null)},x=n(3),E={display:"flex",flexWrap:"wrap",padding:"2em",margin:"2em",border:"2px solid lightgray"},y={width:"100%",textAlign:"center"},R={flex:1},S={display:"flex",alignItems:"center",paddingLeft:"2em",borderLeft:"1px solid lightgray",width:"260px"},q={color:"#444"},M=function(e){var t=e.title,n=e.code,r=e.path,u=e.children;return a.a.createElement("div",{style:E},a.a.createElement("h2",{style:y},a.a.createElement("a",{href:"".concat("https://github.com/termosa/use-request/blob/master/example").concat(r),style:q},"Example: ",t)),a.a.createElement("pre",{style:R},n),a.a.createElement("div",{style:S},u))},L=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",{style:y},"use-request@",x.a),a.a.createElement(M,{title:"Single Request",code:"const SingleFunctionExample = () => {\n  const [max, setMax] = React.useState('');\n\n  const { value, error, pending } = useRequest(\n    generateNumber,           // Async function that returns promise\n    [max ? +max : defaultMax] // Initial arguments\n  );\n\n  return (\n    <div>\n      <div>\n        <input\n          type=\"number\"\n          value={max}\n          placeholder={defaultMax.toString()}\n          onChange={e => setMax(e.target.value)}\n        />\n        {pending ? <span> processing</span> : null}\n      </div>\n      {value !== undefined ? <div>Last result: {value}</div> : null}\n      {error ? <div>Error: {error}</div> : null}\n    </div>\n  );\n};",path:"/src/SingleFunctionExample.js"},a.a.createElement(p,null)),a.a.createElement(M,{title:"Multiple Requests",code:'const useResources = () => {\n  const { execute: reload, value: resources, status } = useRequest(api.get, []);\n  const { execute: create } = useRequest(resource => api.post(resource).then(reload));\n  const { execute: remove } = useRequest(id => api.delete(id).then(reload));\n\n  return { resources, status, create, remove };\n};\n\nconst MultipleFunctionsExample = () => {\n  const resourceLabelRef = useRef(null);\n  const { resources, status, create, remove } = useResources();\n\n  const onSubmit = e => {\n    e.preventDefault();\n    if (!resourceLabelRef.current) return\n    create({ label: resourceLabelRef.current.value });\n    resourceLabelRef.current.value = \'\';\n  };\n\n  return (\n    <div>\n      <form onSubmit={onSubmit}>\n        <input type="text" ref={resourceLabelRef} required />\n        <input type="submit" value="Add" />\n      </form>\n\n      {!resources && status === UseRequestStatus.Pending ? <p>Loading...</p> : null}\n\n      {resources\n        ? <ol>\n          {resources.map(res => (\n            <li key={res.id}>\n              {res.label}\n              {\' \'}\n              <input type="button" onClick={() => remove(res.id)} value="remove" />\n            </li>\n          ))}\n        </ol>\n        : null\n      }\n    </div>\n  );\n};',path:"/src/MultipleFunctionsExample.js"},a.a.createElement(b,null)))};s.a.render(a.a.createElement(L,null),document.getElementById("root"))},3:function(e){e.exports=JSON.parse('{"a":"0.1.1"}')},5:function(e,t,n){e.exports=n(13)}},[[5,1,2]]]);
//# sourceMappingURL=main.0118368b.chunk.js.map